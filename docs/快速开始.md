# 🚀 快速开始

### 🔥 获取源代码

```bash
git clone https://github.com/li-xiu-qi/HearSight
cd HearSight
```

### ⚙️ 环境配置

在项目根目录创建 `.env` 文件，按需配置以下参数：

```bash
# PostgreSQL 数据库（必需）
POSTGRES_USER=hearsight
POSTGRES_PASSWORD=hearsight_pass
POSTGRES_DB=hearsight
POSTGRES_PORT=5432

# 服务端口（可选）
BACKEND_PORT=9999
FRONTEND_PORT=10000
ASR_BACKEND_PORT=8003
REDIS_PORT=6379

# 大语言模型（必需，推荐使用百度AI Studio）
# 百度AI Studio配置（推荐）
AI_STUDIO_API_KEY=your_api_key_here
OPENAI_BASE_URL=https://aistudio.baidu.com/llm/lmapi/v3
OPENAI_CHAT_MODEL=ernie-4.5-300B-A47B

# 或者使用硅基流动平台
# OPENAI_API_KEY=your_siliconflow_api_key
# OPENAI_BASE_URL=https://api.siliconflow.cn/v1
# OPENAI_CHAT_MODEL=baidu/ERNIE-4.5-300B-A47B

# 对话上下文窗口（可选）
CHAT_MAX_WINDOWS=1000000

# 哔哩哔哩登录凭证（可选，用于获取会员视频）
BILIBILI_SESSDATA=
```

在 `backend/` 目录下创建 `.env` 文件：

```bash
# 复制模板
cp .env.example backend/.env
# 编辑配置
```

在 `ASRBackend/` 目录下创建 `.env` 文件：

```bash
# ASR 相关配置
ASR_MODE=cloud
DASHSCOPE_API_KEY=your_dashscope_api_key
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your-anon-key
SUPABASE_BUCKET_NAME=test-public
SUPABASE_FOLDER_NAME=asr
SUPABASE_ADMIN_EMAIL=your-email@example.com
SUPABASE_ADMIN_PASSWORD=your-password
```

**快速提示**：项目推荐使用百度AI Studio的OpenAI兼容API作为LLM服务，可使用ernie-4.5-300B-A47B模型。配置AI_STUDIO_API_KEY（对应OpenAI SDK的api_key字段）和base_url="https://aistudio.baidu.com/llm/lmapi/v3"（对应OpenAI SDK的base_url字段）即可。更具体的内容可以参考：https://ai.baidu.com/ai-doc/AISTUDIO/rm344erns。Embedding服务默认使用硅基流动的OpenAI兼容API，平台地址：https://siliconflow.cn，免费额度申请：https://cloud.siliconflow.cn/i/FcjKykMn。DASHSCOPE_API_KEY 可从阿里云百炼获取。

### 🐳 方案一：容器化部署（推荐）

一行命令启动完整服务栈：

```bash
docker-compose -f docker-compose.cloud.yml up -d --build
```

部署完成后，访问 <http://localhost:10000> 即可进入应用。

> 如果仅需使用容器运行 PostgreSQL 数据库，而将后端和前端分别在本地启动，请参考下方本地部署方案。

### 🖥️ ARM设备部署

如果您在ARM架构设备（如ARM64处理器）上部署HearSight，推荐直接在ARM设备上构建镜像，无需交叉编译（包含交叉编辑教程）。详细步骤请参考 [ARM设备Docker构建指南](ARM设备Docker构建指南.md)。

### 💻 方案二：本地开发部署

#### 前置要求

需要 PostgreSQL 数据库运行。可通过 Docker 启动也可本地安装。

#### 后端服务启动

1. 安装依赖

   ```bash
   pip install -r requirements.txt
   ```

2. 安装 PyTorch

   访问 <https://pytorch.org/get-started/locally/> 选择对应硬件版本

3. 启动服务

   ```bash
   python main.py
   ```

   后端运行在 `http://localhost:9999`

#### 前端应用启动

1. 安装依赖

   ```bash
   cd frontend
   npm install
   ```

2. 启动开发服务器

   ```bash
   npm run dev
   ```

前端在 `http://localhost:5173` 启动