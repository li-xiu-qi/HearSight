# HearSight 前端功能设计文档

## 概述

HearSight 前端应用旨在为用户提供一个直观、易用的界面，用于处理媒体文件（视频/音频）、查看语音转文字结果、生成翻译和摘要，并与AI进行基于内容的对话。本文档详细描述了前端的各项功能模块及其交互关系。

## 功能模块概览

前端应用主要包含以下几个功能模块：

1. **主页模块** - 应用入口和快速开始界面
2. **主应用模块** - 核心功能区域，包含三大面板
3. **文件处理模块** - 文件上传和处理状态管理
4. **转写展示模块** - 转写文本的展示和操作
5. **翻译模块** - 多语言翻译功能
6. **摘要模块** - 自动生成内容摘要
7. **聊天模块** - 基于转写内容的AI对话

## 功能模块详细说明

### 1. 主页模块

主页是用户访问应用的第一个界面，主要功能包括：

- **产品介绍和功能展示**
  - 通过视觉设计展示应用核心功能
  - 突出产品的价值和优势
  
- **快速开始入口**
  - 支持拖拽上传文件
  - 提供URL输入表单用于直接输入视频链接
  - 包含快速开始按钮引导用户进入主应用
  
- **导航引导**
  - 通过清晰的界面元素引导用户操作
  - 支持响应式布局适配不同设备屏幕

用户可以在主页输入媒体文件的URL或者直接上传本地文件来开始处理流程。

### 2. 主应用模块

主应用界面采用三栏式布局设计，包含：

#### 2.1 左侧面板 (LeftPanel)

左侧面板负责展示和管理已处理的转写记录和正在进行的任务，通过标签页形式组织：

- **已处理标签页 (ProcessedTab)**
  - 展示已完成处理的媒体文件列表，以卡片形式呈现
  - 显示文件基本信息（标题、处理时间等）
  - 支持选择文件以在主区域和右侧面板中查看详细信息
  - 提供刷新按钮实时更新列表
  - 支持文件重命名和删除操作
  - 空状态提示引导用户开始使用
  
- **任务标签页 (TasksTab)**
  - 展示正在进行的处理任务
  - 实时显示任务进度状态（下载中、处理中、成功、失败）
  - 通过不同颜色和图标区分任务状态
  - 显示错误信息帮助用户了解处理失败原因
  - 空状态提示说明任务处理机制

#### 2.2 中间主区域

中间区域是主要的操作和展示区域：

- **视频播放器 (VideoPlayer)**
  - 支持视频播放、暂停、音量调节等基本功能
  - 自动识别音频文件并显示相应界面
  - 显示播放时间及总时长
  - 支持全屏播放
  - 提供加载状态提示
  
- **文件信息展示**
  - 显示当前选中文件的基本信息
  - 提供文件状态指示（可播放状态）

#### 2.3 右侧面板 (RightPanel)

右侧面板是核心功能展示区域，通过标签页形式组织不同功能：

- **转写标签页 (TranscriptTab)**
  - 展示语音转文字的结果，以连续文本流形式展示
  - 支持按句子片段高亮显示
  - 点击文本可跳转到视频对应时间点
  - 支持原文和译文切换显示
  - 空状态提示说明功能用途
  
- **片段标签页 (SegmentsTab)**
  - 按时间段分组展示转写内容
  - 显示每个片段的起止时间
  - 支持片段级别的操作（如跳转到对应时间点）
  - 提供片段详细信息查看
  
- **摘要标签页 (SummariesTab)**
  - 展示自动生成的内容摘要，按主题分组
  - 支持选择不同的摘要长度（短、中、长）
  - 提供摘要导出功能（复制总结内容）
  - 支持图文结合展示模式（视频文件可显示对应时间点截图）
  - 提供刷新总结功能（支持确认覆盖已保存内容）
  - 显示摘要对应的时间段，可点击跳转到视频对应位置
  
- **聊天标签页 (ChatView)**
  - 基于转写内容与AI进行对话
  - 支持创建和管理多个聊天会话
  - 显示对话历史记录
  - 提供视频选择器用于选择对话相关的媒体文件
  - 支持图片模式展示（可查看对话涉及的时间点截图）
  - 提供清除聊天记录功能
  - 包含消息输入区域支持发送新消息

### 3. 文件处理模块

文件处理模块负责处理用户上传或通过URL获取的媒体文件：

- **文件上传**
  - 支持拖拽上传和文件选择上传
  - 支持常见视频/音频格式
  - 显示上传进度和状态
  - 提供文件格式校验
  
- **URL处理**
  - 支持从主流平台（如YouTube）获取媒体文件
  - 显示下载和处理进度
  
- **处理状态跟踪**
  - 实时显示文件处理进度（下载 -> 转写 -> 翻译等）
  - 提供处理错误的提示和重试机制
  - 通过不同状态标识展示任务状态

### 4. 转写展示模块

转写展示模块负责呈现语音识别的结果：

- **文本展示**
  - 按句子或段落展示转写结果
  - 以连续文本流形式展示，保持自然阅读体验
  - 支持高亮显示当前播放位置对应的文本
  
- **时间关联**
  - 点击文本可跳转到对应的时间点播放
  - 视频播放时自动滚动到对应文本位置
  
- **语言切换**
  - 支持在原文和译文之间切换显示
  - 自动检测文本语言并提供合适的翻译选项

### 5. 翻译模块

翻译模块提供多语言翻译功能：

- **整篇翻译**
  - 支持将整个转写文本翻译为目标语言
  - 提供常用语言选择（中文、英文）
  - 自动检测原文语言并推荐目标语言
  
- **语言检测**
  - 自动分析转写内容的语言构成
  - 提供语言检测结果和建议
  
- **翻译控制**
  - 支持强制重新翻译选项
  - 显示翻译进度和状态

### 6. 摘要模块

摘要模块自动生成媒体内容的摘要：

- **多长度摘要**
  - 支持生成不同详细程度的摘要（简短、中等、详细）
  
- **摘要展示**
  - 按主题分组展示摘要内容
  - 显示摘要对应的时间段
  - 支持复制和导出功能
  
- **图文结合**
  - 视频文件支持图文展示模式
  - 自动获取摘要时间段的视频截图
  - 支持截图预览功能
  
- **重新生成**
  - 支持刷新摘要功能
  - 提供确认对话框防止误操作覆盖已有内容

### 7. 聊天模块

聊天模块允许用户基于转写内容与AI进行交互：

- **会话管理**
  - 支持创建多个独立的聊天会话
  - 提供会话重命名和删除功能
  - 按时间顺序展示会话列表
  
- **内容对话**
  - 基于已选择的转写内容进行问答
  - 支持同时选择多个文件进行综合问答
  - 提供视频选择器用于精确选择对话范围
  
- **对话历史**
  - 保存和展示对话历史
  - 支持复制对话内容
  
- **多媒体支持**
  - 支持图片模式展示相关时间点截图
  - 可点击时间戳跳转到视频对应位置
  
- **交互功能**
  - 提供消息输入区域
  - 支持清除聊天记录

## 用户操作流程

### 流程1：上传本地文件并处理

1. 用户打开应用进入主页
2. 点击上传按钮或拖拽文件到上传区域
3. 系统开始上传文件并在完成后自动开始处理
4. 文件出现在左侧面板的"已处理"列表中
5. 用户可以选择文件查看详细信息和处理结果

### 流程2：通过URL处理媒体文件

1. 用户在主页输入媒体文件URL
2. 系统开始下载并处理文件
3. 处理过程中在左侧"任务"面板显示进度
4. 处理完成后移至"已处理"列表
5. 用户可以查看处理结果

### 流程3：查看和操作转写结果

1. 用户在左侧面板选择一个已处理的文件
2. 右侧"转写"标签页自动加载并展示转写结果
3. 用户可以点击文本跳转到视频对应时间点
4. 用户可以搜索关键词定位内容
5. 用户可以导出转写文本

### 流程4：使用翻译功能

1. 用户在右侧面板切换到"转写"或"片段"标签页
2. 点击翻译按钮打开翻译对话框
3. 系统自动检测语言并推荐目标语言
4. 用户选择目标语言并开始翻译
5. 系统生成翻译结果并展示
6. 用户可以在原文和译文间切换

### 流程5：生成和查看摘要

1. 用户在右侧面板切换到"摘要"标签页
2. 系统自动生成摘要或用户点击"重新生成"按钮
3. 用户可以选择不同的摘要长度
4. 对于视频文件，用户可以启用图文展示模式
5. 用户可以复制或导出摘要内容

### 流程6：与AI进行内容对话

1. 用户在右侧面板切换到"聊天"标签页
2. 用户可以创建新的聊天会话
3. 通过视频选择器选择相关的转写内容
4. 输入问题并发送
5. 系统基于选定内容生成回答
6. 对话历史被保存在当前会话中

## 数据流设计

### 核心数据实体

1. **Transcript（转写记录）**
   - 包含媒体文件的元信息和转写文本

2. **Segment（片段）**
   - 转写文本按时间段分组的片段

3. **Summary（摘要）**
   - 自动生成的内容摘要

4. **Translation（翻译）**
   - 翻译后的文本内容

5. **Chat Session（聊天会话）**
   - 用户与AI的对话会话记录
