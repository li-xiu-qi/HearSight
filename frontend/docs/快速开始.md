# HearSight å‰ç«¯å¿«é€Ÿå¼€å§‹æŒ‡å—

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•å¯åŠ¨å’Œå¼€å‘ HearSight å‰ç«¯åº”ç”¨ã€‚

## ğŸ”¥ ç¯å¢ƒå‡†å¤‡

### å‰ç½®è¦æ±‚

- Node.js 18.x æˆ–æ›´é«˜ç‰ˆæœ¬
- npm æˆ– yarn åŒ…ç®¡ç†å™¨

### è·å–æºä»£ç 

```bash
git clone https://github.com/li-xiu-qi/HearSight
cd HearSight/frontend
```

## âš™ï¸ ç¯å¢ƒé…ç½®

åœ¨ `frontend/` ç›®å½•ä¸‹åˆ›å»º `.env` æ–‡ä»¶ï¼ŒæŒ‰éœ€é…ç½®ä»¥ä¸‹å‚æ•°ï¼š

```bash
# åç«¯ API åœ°å€ï¼ˆé»˜è®¤ä¸ºæœ¬åœ°å¼€å‘ç¯å¢ƒï¼‰
VITE_BACKEND_URL=http://localhost:9999

# æ˜¯å¦åœ¨ Docker ç¯å¢ƒä¸­è¿è¡Œï¼ˆé»˜è®¤ä¸ºfalseï¼‰
VITE_USE_DOCKER=false

# åç«¯ä¸»æœºåœ°å€ï¼ˆç”¨äºDockerç¯å¢ƒï¼‰
BACKEND_HOST=localhost

# åç«¯ç«¯å£ï¼ˆç”¨äºDockerç¯å¢ƒï¼‰
BACKEND_PORT=9999

# æ˜¯å¦ä½¿ç”¨Dockerï¼ˆç”¨äºViteä»£ç†é…ç½®ï¼‰
USE_DOCKER=false
```

**ç¯å¢ƒå˜é‡è¯´æ˜**ï¼š

- `VITE_BACKEND_URL`: å‰ç«¯åº”ç”¨è¿æ¥çš„åç«¯APIåœ°å€
- `VITE_USE_DOCKER`: æ ‡è¯†æ˜¯å¦åœ¨Dockerç¯å¢ƒä¸­è¿è¡Œ
- `BACKEND_HOST` å’Œ `BACKEND_PORT`: ç”¨äºViteä»£ç†é…ç½®ï¼Œåœ¨Dockerç¯å¢ƒä¸­æŒ‡å‘åç«¯æœåŠ¡å®¹å™¨
- `USE_DOCKER`: æ§åˆ¶Viteä»£ç†ä½¿ç”¨å®¹å™¨åè¿˜æ˜¯localhost

## ğŸ§© å®‰è£…ä¾èµ–

```bash
npm install
```

## ğŸ³ æ–¹æ¡ˆä¸€ï¼šå®¹å™¨åŒ–éƒ¨ç½²ï¼ˆæ¨èï¼‰

### ä½¿ç”¨é¡¹ç›®æ ¹ç›®å½•çš„ Docker Composeï¼ˆæ¨èï¼‰

é¡¹ç›®æ ¹ç›®å½•æä¾›äº†å®Œæ•´çš„ [docker-compose.cloud.yml](../../../docker-compose.cloud.yml) æ–‡ä»¶ï¼Œå¯ä»¥ä¸€é”®å¯åŠ¨åŒ…æ‹¬å‰ç«¯åœ¨å†…çš„æ‰€æœ‰æœåŠ¡ï¼š

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
docker-compose -f ../docker-compose.cloud.yml up -d --build
```

### ä½¿ç”¨å‰ç«¯ç‹¬ç«‹çš„ Docker Compose

å‰ç«¯ç›®å½•ä¸‹æä¾›äº†ç‹¬ç«‹çš„ [docker-compose.yml](../docker-compose.yml) æ–‡ä»¶ï¼Œå¯ç”¨äºå•ç‹¬éƒ¨ç½²å‰ç«¯æœåŠ¡ï¼š

```bash
# åœ¨ frontend ç›®å½•ä¸‹æ‰§è¡Œ
docker-compose up -d --build
```

æ³¨æ„ï¼šä½¿ç”¨ç‹¬ç«‹çš„ docker-compose æ–‡ä»¶æ—¶ï¼Œéœ€è¦ç¡®ä¿åç«¯æœåŠ¡å·²ç»åœ¨è¿è¡Œå¹¶ä¸”å¯ä»¥é€šè¿‡ç½‘ç»œè®¿é—®ã€‚

### å•ç‹¬æ„å»ºå‰ç«¯é•œåƒ

```bash
# æ„å»º Docker é•œåƒ
docker build -t hearsight-frontend .

# è¿è¡Œå®¹å™¨
docker run -p 5173:5173 hearsight-frontend
```

## ğŸ’» æ–¹æ¡ˆäºŒï¼šæœ¬åœ°å¼€å‘éƒ¨ç½²

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

é»˜è®¤æƒ…å†µä¸‹ï¼Œå¼€å‘æœåŠ¡å™¨å°†åœ¨ `http://localhost:5173` ä¸Šè¿è¡Œã€‚

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

æ„å»ºåçš„æ–‡ä»¶å°†ä½äº `dist` ç›®å½•ä¸­ã€‚

### é¢„è§ˆç”Ÿäº§æ„å»º

```bash
npm run preview
```

## ğŸ§ª æµ‹è¯•

è¿è¡Œæµ‹è¯•ï¼š

```bash
npm run test
```

## ğŸš© å¸¸è§é—®é¢˜

### API è¿æ¥å¤±è´¥

æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„ `VITE_BACKEND_URL` é…ç½®æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œã€‚

### ä¾èµ–å®‰è£…å¤±è´¥

å°è¯•æ¸…é™¤ç¼“å­˜åé‡æ–°å®‰è£…ï¼š

```bash
npm cache clean --force
rm -rf node_modules package-lock.json
npm install
```

### ç«¯å£è¢«å ç”¨

ä¿®æ”¹ `vite.config.ts` ä¸­çš„ç«¯å£é…ç½®ï¼š

```javascript
export default defineConfig({
  server: {
    port: 5173 // ä¿®æ”¹ä¸ºå…¶ä»–ç«¯å£
  }
})
```

### Docker ç¯å¢ƒä¸­æ— æ³•è¿æ¥åç«¯

ç¡®ä¿åœ¨ Docker ç¯å¢ƒä¸­æ­£ç¡®è®¾ç½®äº† `USE_DOCKER=true` å’Œ `BACKEND_HOST=backend` ç¯å¢ƒå˜é‡ã€‚