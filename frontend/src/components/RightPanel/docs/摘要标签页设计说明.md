# SummariesTab 摘要标签页设计说明

## 概述

SummariesTab 组件负责展示 HearSight 应用中生成的内容摘要，支持多种摘要长度、图文结合展示模式和交互功能。该组件是内容理解功能的核心展示模块，帮助用户快速掌握媒体内容要点。

## 组件结构

### SummariesTab.tsx

主容器组件，负责：

- 摘要内容的展示和渲染
- 图文结合模式的切换和管理
- 摘要生成和刷新操作
- 用户交互事件的处理

### 核心功能模块

- **摘要展示**: 按主题分组展示摘要内容
- **图文模式**: 视频文件支持图文结合展示
- **摘要操作**: 支持生成、刷新和复制摘要
- **时间关联**: 点击摘要可跳转到对应时间点

## 设计原则

### 1. 内容组织
- 按主题分组展示摘要内容
- 支持多种摘要长度选项
- 提供清晰的视觉层次结构

### 2. 多媒体支持
- 视频文件支持图文结合展示
- 自动获取和缓存时间点截图
- 支持截图预览和时间跳转

### 3. 用户交互
- 提供直观的操作按钮
- 支持摘要内容复制
- 刷新操作前进行用户确认

## 功能详解

### 摘要展示

- 按主题分组展示摘要内容
- 显示摘要对应的时间段信息
- 支持不同长度的摘要展示（短、中、长）
- 使用卡片式布局组织内容

### 图文结合模式

- 仅适用于视频文件（音频文件默认禁用）
- 自动获取摘要时间段的视频截图
- 支持截图预览功能
- 可通过开关切换图文模式

### 摘要生成与刷新

- 首次加载时自动生成摘要
- 支持手动刷新生成新摘要
- 刷新前检查是否有已保存摘要并进行确认
- 显示生成过程中的加载状态

### 时间关联功能

- 摘要中显示对应的时间段
- 点击时间戳可跳转到视频对应位置
- 支持精确到毫秒级的时间定位

### 内容复制

- 提供复制摘要内容的功能
- 支持复制单个主题的摘要
- 操作成功后显示提示信息

## 数据流设计

### Props 接口

- summaries: 摘要数据
- loading: 加载状态
- error: 错误信息
- onGenerate: 生成摘要回调
- onSeekTo: 时间跳转回调
- transcriptId: 转写ID
- mediaType: 媒体类型
- hasSavedSummaries: 是否有已保存摘要

### 内部状态

- imageModeEnabled: 图文模式开关状态
- frameCache: 缩略图缓存状态
- refreshConfirmOpen: 刷新确认对话框状态

### 摘要数据结构

- summary_id: 摘要ID
- content: 摘要内容
- created_at: 创建时间
- length: 摘要长度（短、中、长）
- segments: 关联的时间段信息（开始时间、结束时间、对应文本）

## 用户交互设计

### 摘要展示区域

- 使用可滚动区域展示摘要内容
- 每个主题使用独立卡片展示
- 时间段信息使用特殊样式突出显示
- 支持点击时间段跳转到视频对应位置

### 操作工具栏

- **生成按钮**: 位于工具栏，点击生成摘要
- **刷新按钮**: 位于工具栏，点击刷新摘要
- **图文模式开关**: 位于工具栏，切换图文展示模式
- **复制按钮**: 每个摘要卡片中，点击复制内容

### 对话框设计

- **刷新确认对话框**: 刷新前确认是否覆盖已保存摘要
- **图片预览对话框**: 点击缩略图查看大图

## 多媒体支持

### 缩略图处理

- 根据时间段自动获取视频截图
- 使用缓存机制避免重复请求
- 支持加载状态显示
- 点击查看大图预览

### 缓存机制

- 使用时间段作为缓存键
- 组件卸载前清理缓存
- 支持手动刷新缓存


## 无障碍设计

### 键盘导航
- 支持 Tab 键在元素间导航
- 支持 Enter 键激活按钮
- 支持方向键在摘要间导航

### 屏幕阅读器支持
- 提供适当的 ARIA 标签
- 为操作按钮添加描述性文本
- 确保界面元素语义化

### 视觉设计
- 使用高对比度颜色确保可读性
- 提供足够的点击区域
- 支持字体大小调整