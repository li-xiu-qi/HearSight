/*
 * RightPanelComponents 样式文件已分解为多个独立的CSS文件：
 * - SegmentsView.css: 包含分句视图相关样式
 * - TranscriptView.css: 包含文稿连续视图相关样式
 * - SegmentsToolbar.css: 包含分句工具栏相关样式
 * - TranscriptToolbar.css: 包含文稿工具栏相关样式
 * - SearchModal.css: SearchModal组件样式（目前使用内联样式）
 * - SummaryView.css: SummaryView组件样式（目前使用内联样式）
 * - shared.css: 包含多个组件共享的公共样式
 *
 * 请根据需要导入相应的CSS文件。
 */
/* 分句视图样式 */
.segments-scroll {
  /* 填满父容器剩余空间，由父级 Card / sider-inner 控制高度 */
  flex: 1 1 auto;
  min-height: 0;
  overflow-y: auto;
  overflow-x: hidden;
  position: relative;
  box-sizing: border-box;
  padding-right: 6px; /* 给滚动条留出内边距，避免覆盖右侧内容 */
  padding-left: 2px;
  scrollbar-gutter: stable both-edges;
  contain: layout style; /* 优化渲染性能 */
}

/* 回退：如果父容器高度没有正确传递，使用视口高度计算一个合理的最大高度，保证出现滚动条 */
.segments-scroll {
  max-height: calc(100vh - 220px) !important;
}

/* --- Segments list item styles --- */
.segment-item { 
  padding: 4px 0 !important; 
}

.segment-btn { 
  text-align: left;
  white-space: normal;
  padding: 8px 8px; /* 收紧左右内边距，减少左侧空白 */
  /* 与 Card 背景保持一致，消除强烈白底造成的割裂感 */
  background: transparent;
  border: 1px solid rgba(255,255,255,0.03);
  border-radius: 6px;
  display: flex;
  align-items: flex-start;
  gap: 6px; /* 缩小图标与内容间距 */
  width: 100%;
  height: auto; /* 允许多行 */
}
.segment-btn.is-div { 
  cursor: pointer; 
  user-select: none; 
}
.segment-btn.is-div:focus { 
  outline: none; 
  box-shadow: 0 0 0 2px rgba(22,119,255,.2); 
}
.segment-icon { 
  flex: 0 0 auto; 
  display: inline-flex; 
  width: 18px; 
  justify-content: center; 
  margin-top: 2px; 
  color: #8c8c8c; 
  line-height: 1; 
}
.segment-btn.is-div:hover .segment-icon { 
  color: #1677ff; 
}
.segment-btn.ant-btn-sm { 
  height: auto; 
  padding-top: 8px; 
  padding-bottom: 8px; 
}
.segment-btn > span { 
  line-height: 1.5; 
}
.segment-btn .ant-btn-icon { 
  margin-top: 2px; 
  line-height: 1; 
  flex: 0 0 auto; 
}
.segment-btn:hover {
  border-color: rgba(100,111,255,0.18);
  background: rgba(100,111,255,0.03);
}
.segment-btn.active {
  border-color: rgba(100,111,255,0.36);
  box-shadow: 0 0 0 1px rgba(100,111,255,0.12) inset;
  background: rgba(100,111,255,0.06);
}
.segment-line {
  display: none; /* 用新的两列布局替代 */
}
.segment-time {
  font-variant-numeric: tabular-nums;
  font-weight: 600;
  font-size: 12px;
  color: #262626;
}
.segment-spk {
  font-size: 11px;
  color: #8c8c8c;
  background: #fafafa;
  border-radius: 10px;
  padding: 1px 6px;
}
.segment-text {
  color: #434343;
  line-height: 1.5;
  font-size: 13px;
  /* 自动换行并尽量保持自然换行 */
  word-break: break-word;      /* 优先在单词边界换行 */
  overflow-wrap: anywhere;     /* 过长时任何位置都可断行 */
}

/* 新的两列布局 */
.segment-grid {
  display: grid;
  grid-template-columns: 96px 1fr; /* 左列定宽，右列自适应 */
  gap: 10px;
  width: 100%;
}
.segment-left {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 96px;
  align-items: flex-end; /* 右对齐时间文本 */
  padding-right: 6px; /* 与右侧正文保持小间距 */
}
.segment-right { 
  min-width: 0; 
}

.segment-time-sep { 
  margin: 0 3px; 
  color: #bfbfbf; 
}

/* 更友好的滚动条 */
.segments-scroll::-webkit-scrollbar { 
  width: 8px; 
}
.segments-scroll::-webkit-scrollbar-thumb { 
  background: #d9d9d9; 
  border-radius: 4px; 
}
.segments-scroll::-webkit-scrollbar-thumb:hover { 
  background: #bfbfbf; 
}

/* 文稿连续视图 */
.transcript-scroll {
  flex: 1 1 auto;
  min-height: 0;
  overflow-y: auto;
  overflow-x: hidden;
  position: relative;
  padding-right: 6px;
  scrollbar-gutter: stable both-edges;
  contain: layout style; /* 优化渲染性能 */
}

.transcript-scroll::-webkit-scrollbar { 
  width: 8px; 
}
.transcript-scroll::-webkit-scrollbar-thumb { 
  background: #d9d9d9; 
  border-radius: 4px; 
}
.transcript-scroll::-webkit-scrollbar-thumb:hover { 
  background: #bfbfbf; 
}

.transcript-body {
  line-height: 1.7;
  font-size: 14px;
  color: #434343;
  text-align: left;
}

.transcript-seg {
  cursor: pointer;
  display: inline;
  position: relative;
  padding: 2px 2px;
  margin-right: 4px;
  border-radius: 4px;
  transition: background-color .15s, color .15s;
}

.transcript-seg:hover { 
  background: rgba(100,111,255,0.10); 
}

.transcript-seg.active { 
  background: rgba(100,111,255,0.18);
  color: #262626;
  box-shadow: 0 0 0 1px rgba(100,111,255,0.25) inset;
}

.transcript-text { 
  white-space: pre-wrap; 
  word-break: break-word; 
}

/* 回退最大高度，类似 segments-scroll */
.transcript-scroll { 
  max-height: calc(100vh - 220px) !important; 
}

/* 文稿工具栏吸顶（在 Tabs 下方） */
.transcript-toolbar {
  position: relative;
  background: linear-gradient(#fff,#fff);
  padding: 8px 8px 12px 8px;
  border-bottom: 1px solid #f0f0f0;
}

.transcript-toolbar-inner {
  display: flex;
  align-items: center;
  gap: 8px;
}

.toolbar-label { 
  color: #8c8c8c; 
  font-size: 12px; 
}

/* 分句工具栏吸顶 */
.segments-toolbar {
  position: relative;
  background: #fff;
  padding: 8px 8px 12px 8px;
  border-bottom: 1px solid #f0f0f0;
}

.segments-toolbar-inner {
  display: flex;
  align-items: center;
  gap: 8px;
}

.auto-scroll-group { 
  display: flex; 
  align-items: center; 
  gap: 6px; 
  white-space: nowrap; 
}

.auto-scroll-group .toolbar-label { 
  margin-right: 0; 
}

/* 固定Tabs容器样式 */
.fixed-tabs-container {
  flex: 0 0 auto;
  position: sticky;
  top: 0;
  z-index: 120;
  background: white;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  height: 46px;
}

/* 固定工具栏容器样式 */
.fixed-toolbar-container {
  flex: 0 0 auto;
  position: sticky;
  top: 46px;
  z-index: 125;
  background: white;
}

/* 可滚动内容容器样式 */
.scrollable-content-container {
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  padding: 0 8px 8px 8px;
}

/* 防止内部滚动层覆盖导航（某些浏览器合成层问题时） */
.fullscreen-right-panel-content .transcript-scroll,
.fullscreen-right-panel-content .segments-scroll {
  position: relative;
  z-index: 1;
  isolation: isolate; /* 创建新的层叠上下文 */
}

/* 确保 Tabs 标题始终保持可见 */
.fullscreen-right-panel-content .ant-tabs {
  display: flex;
  flex-direction: column;
  height: 100%;
}

.fullscreen-right-panel-content .ant-tabs > .ant-tabs-nav {
  position: sticky;
  top: 0;
  background: white;
  z-index: 120;
  margin-bottom: 0;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  height: 46px; /* 明确设置高度 */
}

.fullscreen-right-panel-content .ant-tabs .ant-tabs-content {
  flex: 1;
  min-height: 0;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.fullscreen-right-panel-content .ant-tabs .ant-tabs-tabpane {
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  contain: layout style; /* 优化渲染性能 */
}

/* Ensure Ant Design Tabs inside grow-cards fill the card body so inner scroll areas get constrained height */
.left-grow-card .ant-tabs,
.right-grow-card .ant-tabs {
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 0;
}

.left-grow-card .ant-tabs .ant-tabs-content,
.right-grow-card .ant-tabs .ant-tabs-content {
  flex: 1 1 auto;
  min-height: 0;
}

.left-grow-card .ant-tabs .ant-tabs-tabpane.ant-tabs-tabpane-active,
.right-grow-card .ant-tabs .ant-tabs-tabpane.ant-tabs-tabpane-active {
  display: flex;
  flex-direction: column;
  min-height: 0;
  height: 100%;
}

/* defensive: hide any non-active tabpane to prevent overlapping content */
.left-grow-card .ant-tabs .ant-tabs-tabpane:not(.ant-tabs-tabpane-active),
.right-grow-card .ant-tabs .ant-tabs-tabpane:not(.ant-tabs-tabpane-active) {
  display: none !important;
}

.right-grow-card .ant-card-body,
.left-grow-card .ant-card-body {
  /* ensure body is a flex column so children can stretch */
  display: flex;
  flex-direction: column;
  min-height: 0;
}

/* Stronger height propagation for right column to ensure inner scroll area gets constrained height */
.three-col__right,
.three-col__right > .sider-inner,
.three-col__right .right-grow-card,
.three-col__right .right-grow-card .ant-card-body,
.three-col__right .right-grow-card .ant-tabs,
.three-col__right .right-grow-card .ant-tabs .ant-tabs-content,
.three-col__right .right-grow-card .ant-tabs .ant-tabs-content .ant-tabs-tabpane {
  height: 100%;
  min-height: 0;
}

.three-col__right .segments-scroll {
  height: 100%;
}